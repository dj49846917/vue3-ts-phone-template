import{g as B,u as C,v as j,m as b,n as M,r as x,o as g,h as _,j as F,i as f,A as I,B as S,I as i,F as A,q as L,D as T,p as P,k as D,s as O}from"./vendor.1dcf2f74.js";import{a as N}from"./index.50c16ae5.js";import{q as U,t as $}from"./index.9a305ccf.js";import{_ as q}from"./index.5103ebbf.js";function y(r,n){r=r.replace(/=/g,"");var t=[];switch(n.constructor){case String:case Number:case Boolean:t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));break;case Array:n.forEach(function(l){t=t.concat(y(r+"[]=",l))});break;case Object:Object.keys(n).forEach(function(l){var c=n[l];t=t.concat(y(r+"["+l+"]",c))})}return t}function E(r){var n=[];return r.forEach(function(t){typeof t=="string"?n.push(t):n=n.concat(E(t))}),n}function V(r,n,t){if(n===void 0&&(n={}),typeof r!="string")throw new Error('[Vue-jsonp] Type of param "url" is not string.');if(typeof n!="object"||!n)throw new Error("[Vue-jsonp] Invalid params, should be an object.");return t=typeof t=="number"?t:5e3,new Promise(function(l,c){var h=typeof n.callbackQuery=="string"?n.callbackQuery:"callback",d=typeof n.callbackName=="string"?n.callbackName:"jsonp_"+(Math.floor(1e5*Math.random())*Date.now()).toString(16);n[h]=d,delete n.callbackQuery,delete n.callbackName;var u=[];Object.keys(n).forEach(function(o){u=u.concat(y(o,n[o]))});var k=E(u).join("&"),p=function(){v(),clearTimeout(e),c({status:400,statusText:"Bad Request"})},v=function(){a.removeEventListener("error",p)},s=function(){document.body.removeChild(a),delete window[d]},e=null;t>-1&&(e=setTimeout(function(){v(),s(),c({statusText:"Request Timeout",status:408})},t)),window[d]=function(o){clearTimeout(e),v(),s(),l(o)};var a=document.createElement("script");a.addEventListener("error",p),a.src=r+(/\?/.test(r)?"&":"?")+k,document.body.appendChild(a)})}const w=r=>(P("data-v-89c25bbc"),r=r(),D(),r),W={class:"container"},G=w(()=>f("div",{id:"content",class:"content"},null,-1)),R={class:"search"},Z={class:"searchBox"},Q=w(()=>f("div",{class:"title"},"\u8BF7\u8F93\u5165\u5173\u952E\u5B57",-1)),z={key:0,class:"searchList"},K=["onClick"],H=B({setup(r){const n=C();let t=j();const l=b({title:"\u6D77\u5E95\u635E\u738B\u5E9C\u4E95\u5E97",address:"\u5730\u5740\uFF1A\u5317\u4EAC\u5E02\u4E1C\u57CE\u533A\u738B\u5E9C\u4E95\u5927\u885788\u53F7\u4E50\u5929\u94F6\u6CF0\u767E\u8D27\u516B\u5C42",lng:null,lat:null}),c=b({list:[],selected:!1,keyword:""});M(()=>{h()});function h(){t.value=new BMap.Map("content"),t.value.centerAndZoom("\u91CD\u5E86",18),t.value.enableScrollWheelZoom(!0),new BMap.Geolocation().getCurrentPosition(function(e){if(this.getStatus()==BMAP_STATUS_SUCCESS){console.log("r",e);let a=new BMap.Point(e.point.lng,e.point.lat),o=new BMap.Marker(a);t.value.addOverlay(o),t.value.centerAndZoom(a,18)}else alert("failed"+this.getStatus())}),t.value.addEventListener("click",function(e){console.log("e",e);let a=new BMap.Point(e.point.lng,e.point.lat);l.lng=e.point.lng,l.lat=e.point.lat,t.value.centerAndZoom(a,18);let o=new BMap.Marker(a);t.value.clearOverlays(),t.value.addOverlay(o),d(e.point.lng,e.point.lat),p(a)})}function d(s,e){const a={ak:"9UxhL8yiE89j3ryPL2G25msjPFzTnDGd",location:`${s},${e}`,output:"json",radius:5e3};let o="/bapi/reverse_geocoding/v3/";o="https://api.map.baidu.com/reverse_geocoding/v3/",N.get(`${o}${U(a)}`).then(m=>{console.log("res",m)})}const u=$(s=>{c.keyword=s.target.value;const e={q:s.target.value,ak:"9UxhL8yiE89j3ryPL2G25msjPFzTnDGd",region:"\u91CD\u5E86\u5E02",output:"json",callback:"jsonp_func"};V("https://api.map.baidu.com/place/v2/suggestion?callback=callFunc",e).then(a=>{c.list=a.result})},1e3);function k(s){console.log(s),c.keyword=s.name,c.selected=!0;const e=s.location.lng,a=s.location.lat;l.title=s.name,l.address=`\u5730\u5740\uFF1A${s.address}`,l.lng=e,l.lat=a;let o=new BMap.Point(e,a),m=new BMap.Marker(o);t.value.clearOverlays(),t.value.addOverlay(m),t.value.centerAndZoom(o,18),p(o)}function p(s){var e={width:200,height:100,title:l.title,enableMessage:!0},a=new BMap.InfoWindow(l.address,e);t.value.openInfoWindow(a,s)}function v(){n.back()}return(s,e)=>{const a=x("van-nav-bar");return g(),_("div",W,[F(a,{class:"nav",title:"\u767E\u5EA6\u5730\u56FE","left-arrow":"",onClickLeft:e[0]||(e[0]=o=>v())}),G,f("div",R,[f("div",Z,[Q,I(f("input",{type:"text",onInput:e[1]||(e[1]=(...o)=>i(u)&&i(u)(...o)),"onUpdate:modelValue":e[2]||(e[2]=o=>i(c).keyword=o)},null,544),[[S,i(c).keyword]])]),i(c).selected?T("",!0):(g(),_("ul",z,[(g(!0),_(A,null,L(i(c).list,o=>(g(),_("li",{key:o.uid,onClick:m=>k(o)},O(o.name),9,K))),128))]))])])}}});var te=q(H,[["__scopeId","data-v-89c25bbc"]]);export{te as default};
