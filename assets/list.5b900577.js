import{a as u}from"./index.50c16ae5.js";import{q as c}from"./index.9a305ccf.js";let s=[];const o=u.CancelToken,i=(e,r)=>{const t=e.url;s.indexOf(t)!==-1?r?r("\u53D6\u6D88\u91CD\u590D\u8BF7\u6C42"):s.splice(s.indexOf(t),1):r&&s.push(t)},n=u.create({timeout:5e3});n.interceptors.request.use(e=>(e.neverCancel||(e.cancelToken=new o(r=>{i(e,r)})),e),e=>{Promise.reject(e)});n.interceptors.response.use(e=>{i(e.config);const r=e.data;return r.code!==200?(r.code===401,Promise.reject("error")):r},e=>(console.log(e),s=[],e.message==="\u53D6\u6D88\u91CD\u590D\u8BF7\u6C42",Promise.reject(e)));function m(e){return n({url:`/api/get${c(e)}`})}export{m as g};
